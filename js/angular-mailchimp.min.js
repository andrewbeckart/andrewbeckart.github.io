"use strict";angular.module("mailchimp",["ng","ngResource","ngSanitize"]).controller("MailchimpSubscriptionCtrl",["$log","$resource","$scope","$rootScope",function(n,t,i,r){i.addSubscription=function(i){var o,s,e={},h,f,u;for(h="//"+i.username+"."+i.dc+".list-manage.com/subscribe/post-json",f=Object.keys(i),u=0;u<f.length;u++)e[f[u]]=i[f[u]];e.c="JSON_CALLBACK";o={save:{method:"jsonp"}};s=t(h,e,o);s.save(function(n){if(i.errorMessage="",i.successMessage="",i.result=n.result,n.result==="error")if(n.msg){var t=n.msg.split(" - ");t.length>1&&t.shift();i.errorMessage=t.join(" ")}else i.errorMessage="Sorry! An unknown error occured.";else n.result==="success"&&(i.successMessage=n.msg);r.$broadcast("mailchimp-response",n.result,n.msg)},function(t){n.error("MailChimp Error: %o",t)})}}]);