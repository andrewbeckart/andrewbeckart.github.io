"use strict";app.controller("NavCtrl",["$scope","$location","$filter","sortData","settings","Analytics",function(n,t,i,r,u,f){n.title=u.site_title;r.getItems().then(function(t){n.categories=t.items.reduce(function(n,t){return n.indexOf(t.category)<0&&n.push(t.category),n},[])})["catch"](function(){n.error="unable to get the items"});n.$on("$routeChangeSuccess",function(){n.navShow=!0});n.getClass=function(n){return(f.trackPage(),n==="/")?t.path()==="/"?"active":"":t.path().substr(0,n.length)===n?"active":""};n.closeThis=function(){n.page.showSubNav(!1)}}]);app.controller("SocialCtrl",["$scope",function(n){n.socialUrl=function(n){window.open(n,"_blank")}}]);app.controller("FooterCtrl",["$scope","$sce","settings",function(n,t,i){n.footer=t.trustAsHtml("&copy; 2008-"+(new Date).getFullYear()+" "+i.site_title)}]);app.controller("subscribeCtrl",["$scope","$mdDialog",function(n,t){function i(n,t){n.closeDialog=function(){t.cancel()}}n.subscribe=function(n){t.show({targetEvent:n,controller:["$scope","$mdDialog",i],templateUrl:"partials/subscribe.html",openFrom:"#subscribe",closeTo:"#subscribe",clickOutsideToClose:!0})}}]);app.controller("subscribeFormCtrl",["$scope","utilities","Analytics",function(n,t,i){i.trackEvent("subscribe","clicked");n.change=function(){var i=t.splitName(n.mailchimp.NAME);n.mailchimp.FNAME=i.first_name;n.mailchimp.LNAME=i.last_name}}]);app.controller("PageCtrl",["$scope",function(n){n.page.setDirection()}]);app.controller("HomeCtrl",["$scope",function(n){n.page.setDirection();n.page.windowHeight({height:document.documentElement.offsetHeight+"px"})}]);app.controller("ContactCtrl",["$scope","utilities",function(n,t){n.page.setDirection();n.change=function(){var i=t.splitName(n.contact.NAME);n.contact.FNAME=i.first_name;n.contact.LNAME=i.last_name}}]);app.controller("NewsCtrl",["$scope","settings","wp",function(n,t,i){n.page.setDirection();i.getBlog().then(function(t){n.blog=t.data});n.page=0;var r="1";n.posts=[];n.getPosts=function(){n.page++;i.getPosts(r,n.page).then(function(t){angular.forEach(t.data.posts,function(t){n.posts.push(t)})})};n.getPosts()}]);app.controller("PostCtrl",["$scope","$http","settings","$routeParams","wp",function(n,t,i,r,u){u.getPost(r.slug).then(function(t){n.post=t.data})}]);app.controller("ListCtrl",["$scope","$filter","$routeParams","$mdMedia","sortData",function(n,t,i,r,u){n.$watch(function(){return r("xs")},function(t){t&&(n.imgSize=120)});n.$watch(function(){return r("sm")},function(t){t&&(n.imgSize=170)});n.$watch(function(){return r("md")},function(t){t&&(n.imgSize=240)});n.$watch(function(){return r("lg")},function(t){t&&(n.imgSize=300)});n.page.setDirection();u.getItems().then(function(r){n.items=t("filter")(r.items,{category:i.itemCategory});n.title=n.items[0].category;n.page.setTitle(n.title)})}]);app.controller("DetailCtrl",["$scope","$routeParams","$filter","$location","sortData","settings","Analytics","$mdMedia",function(n,t,i,r,u,f,e,o){n.zoom=function(t){if(n.zoomed){var i=t.currentTarget,r=t.clientX-$(i).offset().left,u=t.clientY-$(i).offset().top;u=Math.round(u/i.offsetHeight*100);r=Math.round(r/i.offsetWidth*100);i.style.backgroundPosition=r+"% "+u+"%";n.$watch(function(){return o("md")},function(n){n&&console.log(r+"% "+u+"%")})}};n.page.containerClass("faded");var s=f.domain,h=f.site_title;this.shareOpen=!1;n.url=t.itemUrl;u.getItems().then(function(u){var f=i("filter")(u.items,{category:t.itemCategory}),o=i("filter")(f,{url:n.url},!0)[0],c=f.indexOf(o);n.prevItem=c>0?Number(c)-1:f.length-1;n.nextItem=c<f.length-1?Number(c)+1:0;n.page.setTitle(o.title);n.page.setCategory("/gallery/"+o.category.toLowerCase()+"/");n.item=o;n.item.imgUrl="images/"+o.image+".jpg";n.prev=f[n.prevItem];n.next=f[n.nextItem];e.trackPage("/gallery/"+o.category.toLowerCase()+"/"+o.url,o.title);n.getPrev=function(t){n.page.setDirection("forward");r.url("/gallery/"+f[t].category.toLowerCase()+"/"+f[t].url)};n.getNext=function(t){n.page.setDirection("backward");r.url("/gallery/"+f[t].category.toLowerCase()+"/"+f[t].url)};n.tweet=function(n){window.open("https://twitter.com/intent/tweet?url=http%3A%2F%2F"+s+"/gallery/"+n.category.toLowerCase()+"/"+n.url+"&text="+h+" - "+n.title+"&hashtags=andrewbeck,contemporypainter","_blank","width=600, height=260")};n.like=function(n){window.open("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fandrewbeck.ca%2Fgallery%2F"+n.category.toLowerCase()+"%2F"+n.url+"&picture=http%3A%2F%2Fandrewbeck.ca%2Fimages%2F"+n.image+".jpg&title=TITLE&description=DESCRIPTION&caption=WEBSITENAME","_blank","width=580, height=550")};n.pin=function(n){window.open("http://www.pinterest.com/pin/create/button/?url=http%3A%2F%2F"+s+"/gallery/"+n.category.toLowerCase()+"/"+n.url+"&media=http%3A%2F%2F"+s+"/images/"+n.image+".jpg&description="+h+"+-+"+n.title,"_blank","width=750, height=540")}})}]);